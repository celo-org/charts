# Default values for op-succinct.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# -- Mode to run in (proposer or challenger)
mode: "proposer"

# -- Chart name override
nameOverride: ""
# -- Chart full name override
fullnameOverride: ""

# -- Number of deployment replicas
replicaCount: 1

image:
  # -- Image repository base
  repository: us-west1-docker.pkg.dev/devopsre/celo-blockchain-public/op-succinct-proposer
  # -- Image pullpolicy
  pullPolicy: IfNotPresent
  # -- Image tag
  # Overrides the image tag whose default is the chart appVersion.
  tag: "1.0.2-rc.1"

# -- Image pull secrets
imagePullSecrets: []

extraArgs: []

config:
  endpoints:
    # --URL of the L1 execution client
    l1_execution: ""
    # -- URL of the L1 consensus (beacon) client (proposer only)
    l1_consensus: ""
    # -- URL of the L2 execution (op-geth) client
    l2_execution: ""
    # -- URL of the L2 consensus (op-node) client (proposer only)
    l2_consensus: ""
    # -- URL of the EigenDA proxy
    eigenda_proxy: ""
  game:
    # -- Address of the active L1 `DisputeGameFactoryProxy` address
    dispute_game_factory_address: ""
    # -- Percentage (0.0-100.0) of valid games to challenge for testing defense mechanisms (challenger only)
    malicious_challenge_percentage: "0.0"
    # -- If the monitor-only mode is disabled, the challenger will try to send `challenge()` calls onchain in case of a challenger (challenger only).
    disable_monitor_only: false
  proof:
    # -- Proof mode for aggregation proofs. `groth16` for Groth16 proofs, `plonk` for PLONK proofs.
    # -- Changing the proof mode requires updating the SP1_VERIFIER address in contracts/src/fp/OPSuccinctFaultDisputeGame.sol to the corresponding verifier gateway contract.
    agg_proof_mode: "plonk"
    # -- The maximum number of concurrent range proof tasks. (default: 1)
    # -- Increasing this feeds more work into the prover and host in parallel; tune carefully based
    # -- on observed latency, and system resources before deviating from default.
    max_concurrent_range_proofs: 1
    # -- The number of segments to split the range into (1-16) (default: 1).
    range_split_count: 1
    # -- The gas limit to use for range proofs.
    range_gas_limit: "1000000000000"
    # -- The cycle limit to use for range proofs.
    range_cycle_limit: "1000000000000"
    agg_cycle_limit: "1000000000000"
    # -- 	The gas limit to use for aggregation proofs.
    agg_gas_limit: "1000000000000"
    # -- The proving timeout (in seconds). Used as the server-side deadline for proof requests and as the client-side maximum wait time when polling for proof completion.
    timeout: 14400
  intervals:
    # -- Proposal interval in blocks (proposer only)
    proposal: 20
    # -- Fetch interval
    fetch: 30
  remote_signing:
    # -- use a remote signer for signing the l1 transactions instead
    # -- of reading the "PRIVATE_KEY" env-var and signing locally.
    enabled: true
    # -- Address of the signer, will get used as the 'from' address in `eth_signTransaction` call
    signer_address: ""
    # -- Address of the op-signer-service that is responsible for the L1 batcher privkey, required when signing.remote = true
    # -- Note that this currently only works, when TLS is disabled in the signer-service
    endpoint: ""

  # Google Cloud KMS signing configuration
  # All fields must be provided together - they are passed to the gcloud KMS Rust SDK for transaction signing
  google_kms_signing:
    # -- GCP KMS keyring name containing the signing key
    keyring: ""
    # -- GCP region/location where the KMS keyring is deployed, e.g., "global"
    location: ""
    # -- GCP project ID where the KMS resources are located
    project_id: ""
    # -- Name of the HSM key within the keyring
    hsm_key_name: ""
    # -- Version number of the HSM key to use for signing
    hsm_key_version: 2

  # -- Use a secret to inject env-vars into the executor.
  # -- The `NETWORK_PRIVATE_KEY` has to be present,
  # -- the `PRIVATE_KEY` is only required when `config.remote_signing.enabled` is `false`.
  secret_env:
    # -- Use an existing kubernetes secret by it's secret name
    existing_name: ""
    # -- If any keys are present here,
    # -- creates a new kubernetes secret, that injects arbitrary env-vars
    # -- into the executor.
    overwrites: {}
  metrics:
    enabled: true
    addr: 0.0.0.0
    port: 7300

serviceAccount:
  # -- Specifies whether a service account should be created
  create: true
  # -- Automatically mount a ServiceAccount's API credentials?
  automount: true
  # -- Annotations to add to the service account
  annotations: {}
  # -- The name of the service account to use. If not set and create is true, a name is generated using the fullname template
  name: ""

services:
  metrics:
    enabled: true
    type: ClusterIP
    port: 7300
    annotations: {}
    publishNotReadyAddresses: true

# -- Custom pod annotations
podAnnotations: {}
  # prometheus.io/path: /metrics
  # prometheus.io/port: "7300"
  # prometheus.io/scrape: "true"

# -- Custom pod labels
podLabels: {}

# -- Custom pod security context
podSecurityContext: {}
  # fsGroup: 2000

# -- Custom container security context
securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

# -- Container resources
resources: {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

# -- Liveness probe configuration
livenessProbe: {}
  # httpGet:
  #   path: /healthz
  #   port: healthz

# -- Readiness probe configuration
readinessProbe: {}
  # httpGet:
  #   path: /healthz
  #   port: healthz

# -- Kubernetes node selector
nodeSelector: {}

# -- Kubernetes tolerations
tolerations: []

# -- Kubernetes enableServiceLinks
enableServiceLinks: false

# -- Kubernetes pod affinity
affinity: {}
